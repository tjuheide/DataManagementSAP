{
  "hash": "ff3a54befc4379175dc6a94c0a980039",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"General thoughts\"\nnumber-sections: true\n---\n\n\n\n\n## Motivation\n\nThe purpose of a statistical analysis plan (SAP) - which will often also contain a (partial) data management plan - is to improve the quality of studies. The SAP will often be based on (or an appendix to) a protocol where the overall outline of a study is presented with fewer technical details.\n\n### The research question - what is the estimand?\n\nWriting a detailed SAP forces the researcher/study group to think clearly about what the aim of the study is (which estimand[^1] needs to be estimated?), and how to achieve this aim (which estimator can provide the best estimate?). Possibly, the group will come to the conclusion that a reliable estimate cannot be made with the data at hand, in which case they can abandon the study and save themselves (along with reviewers, editors, taxpayers, and other innocent bystanders) a lot of time and resources which can then be spent on something fruitful.\n\n[^1]: There are possibly several estimands.\n\n![[xkcd.com/1838](https://xkcd.com/1838/)](./figs/machine_learning.png){#fig-ml}\n\nSpeaking from experience, it is not uncommon that a researcher wants an answer to a question that is so vague that several different analyses could be carried out, and all be said to provide a relevant answer to the overall question.\n\nA question like \"What is the occurrence of dementia in individuals with chronic kidney disease (CKD)?\" can be a good overall question, but there is no unique answer to that because the question is not specific. It could be interpreted in several ways:\n\n1.  Among people with CKD living in Denmark today, how large a proportion also have dementia?\n    -   This question could be answered using a cross sectional design.\n2.  Among people who lived with CKD in Denmark 10 years ago how large a proportion have had dementia since?\n    -   This question could be answered with a cohort design, using appropriate time-to-event methods to take censoring and the competing risk of death into account.\n3.  Among people with incident CKD in the period 2010-2025 without prevalent dementia at the time of CKD, how large a proportion have developed dementia since?\n    -   Again, a cohort design with time-to-event methods could be used to answer this question, but notice that it will be a different cohort compared to the above.\n\nEven these questions are not completely clear. The first question interprets \"occurrence\" as \"prevalence\", while the second and third aim to provide estimates of an incompletely defined \"risk\", seeing that risk strictly speaking only makes sense if a time frame is also specified, e.g., 10-year risk.\n\nIf the question is not clear before the answer is sought, there is a significant risk of p-hacking[^2] or HARKing.[^3]\n\n[^2]: [xkcd on p-hacking](https://xkcd.com/882/)\n\n[^3]: [Wikipedia on HARKing](https://en.wikipedia.org/wiki/HARKing).\n\n### Definitions and data\n\nOnce it is clear what the specific research question is, i.e., what the estimand is, it is also relevant to consider how the population and the individual variables are defined.\n\nContinuing with the example of CKD and dementia, there will be several ways to identify these conditions from registries. Therefore, even if a SAP has been written in great detail, i.e., considerations on how to handle missing data are made, estimation methods described, table shells ready to be populated etc., it is still important to also describe how a population with \"incident CKD\", say, can be identified from registries. Likewise, it needs to be specified how \"dementia\" and any other variable necessary for the analyses should be defined.\n\nDefining populations and variables is data management and not statistical analyses per se. That does not make specification of these aspects less important, this is just to point out that a *data management plan* is also essential in most registry-based studies.\n\n### Two documents or one?\n\nThe data management plan and the SAP can often be written as one coherent document with no explicit distinction between the two parts. However, it can still be relevant to keep in mind that data management and statistical analyses are in principle separate parts/phases of a study. In international/multicenter studies, it is generally advisable to use a common data model, so that analytic scripts (scripts needed to carry out statistical analyses as specified in the SAP) can be shared, ensuring the same methods are applied at all centers. To facilitate this, each center must provide a data set that complies with certain rules, i.e., variables must have specific names, types, formats, etc. as specified by the coordinating center.\n\nHowever, data management will generally have to differ between centers at some initial level. At the most low-practical level, registries and their variables will have different names and structures. There can also be qualitative differences, e.g., primary vs. secondary care data, granularity of diagnosis/procedure/... codes, or precision of time variables,[^4] all of which may require different approaches between centers. The point being that in multicenter studies each site probably needs to have its own data management plan, whereas statistical analyses should follow common scripts aligning to a shared SAP.\n\n[^4]: Examples from Danish registries include laboratory data which hold dates and time stamps (hours and minutes), whereas the National Health Insurance Service Registry only includes week number.\n\nIn the following, it will be assumed that the data management plan is incorporated into the SAP.\n\n## Elements of the SAP\n\nThis section lists elements you might include in a SAP. Not everything will be relevant for all projects, so do not feel obliged to include something about each of these topics.\n\n### Sanity checks {#sec-sanity}\n\nAt various places in the SAP, you might want to specify milestones at which to pause the analyses and look at the results so far. E.g., once the population is constructed, it might be sensible to check its size before moving on to defining variables. Once the (baseline) variables are defined, you might want to see the descriptive table(s) before moving on to the outcome analyses. Looking at the overall risk (across exposure groups) before making a comparison between exposure groups can also be considered.\n\nThese sanity check may enable you to correct mistakes before they are consequential, by reducing the risk of rerunning the analyses *after* (the first version of) the results of primary interest are known. Rerunning the analyses after the results are known, always comes with the uncertainty as to whether you rerun because the results are not to your satisfaction, or because you could genuinely come with a less biased estimate with the available data. Whenever you rerun analyses you lose credibility. If the results in themselves lead you to rerun the analyses until you get what you want, you are on shaky ground.[^5] Therefore,\n\n[^5]: That is putting it mildly.\n\n-   if the population is much smaller or larger than expected,\n-   if the exposure groups are too dissimilar for sensible comparisons, or\n-   if the overall risk looks completely off,\n\nyou can (try to) find ways to correct these aspects[^6] before knowing the primary result, and thus you prevent yourself from p-hacking.[^7]\n\n[^6]: Ultimately, you might realize the study is unfeasible and you can cancel it before wasting any more time.\n\n[^7]: Naturally, reviewer 2 might not like the results and they might p-hack by proxy (you).\n\nThe sanity checks should not necessarily have a section of their own in the SAP. Instead, they might be included at the places in the document where they occur naturally. E.g., a sanity check for population size may be put in the section defining the study population, and a sanity check for population characteristics might be placed where the descriptive analyses are specified.\n\n### Log of changes\n\nNear the start of the SAP there should be a log of changes, documenting any changes made after the data management or analyses are started. The log should contain dates where changes are made, what the changes are, and reasons for the changes. This will both serve as a reminder within the group of why decisions were made, and if the statistician is replaced the new statistician will be able to get a quick overview of the history of the project (and find reasons for deviations between what is actually done, and what was specified in the protocol).[^8]\n\n[^8]: In @tbl-changelog an entry is made for the completion of the first version of the SAP for timeline purposes. This is not necessary and can be omitted.\n\n\n\n\n::: {#tbl-changelog .cell tbl-cap='{}'}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"forstncypv\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#forstncypv table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#forstncypv thead, #forstncypv tbody, #forstncypv tfoot, #forstncypv tr, #forstncypv td, #forstncypv th {\n  border-style: none;\n}\n\n#forstncypv p {\n  margin: 0;\n  padding: 0;\n}\n\n#forstncypv .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#forstncypv .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#forstncypv .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#forstncypv .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#forstncypv .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#forstncypv .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#forstncypv .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#forstncypv .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#forstncypv .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#forstncypv .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#forstncypv .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#forstncypv .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#forstncypv .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#forstncypv .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#forstncypv .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#forstncypv .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#forstncypv .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#forstncypv .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#forstncypv .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#forstncypv .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#forstncypv .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#forstncypv .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#forstncypv .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#forstncypv .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#forstncypv .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#forstncypv .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#forstncypv .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#forstncypv .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#forstncypv .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#forstncypv .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#forstncypv .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#forstncypv .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#forstncypv .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#forstncypv .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#forstncypv .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#forstncypv .gt_left {\n  text-align: left;\n}\n\n#forstncypv .gt_center {\n  text-align: center;\n}\n\n#forstncypv .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#forstncypv .gt_font_normal {\n  font-weight: normal;\n}\n\n#forstncypv .gt_font_bold {\n  font-weight: bold;\n}\n\n#forstncypv .gt_font_italic {\n  font-style: italic;\n}\n\n#forstncypv .gt_super {\n  font-size: 65%;\n}\n\n#forstncypv .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#forstncypv .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#forstncypv .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#forstncypv .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#forstncypv .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#forstncypv .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#forstncypv .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#forstncypv .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#forstncypv div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" style=\"table-layout:fixed;width:100%;\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <colgroup>\n    <col style=\"width:14%;\"/>\n    <col style=\"width:43%;\"/>\n    <col style=\"width:43%;\"/>\n  </colgroup>\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"3\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style=\"font-weight: bold;\">Log of changes</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"Date\">Date</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"Change\">Change</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"Reason\">Reason</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Date\" class=\"gt_row gt_left\">20/06/2023</td>\n<td headers=\"Change\" class=\"gt_row gt_left\">NA (First version)</td>\n<td headers=\"Reason\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"Date\" class=\"gt_row gt_left\">08/12/2023</td>\n<td headers=\"Change\" class=\"gt_row gt_left\">HRs estimated by Cox regression replaced by RRs computed using strata-specific risks estimated by the Aalen-Johansen estimator</td>\n<td headers=\"Reason\" class=\"gt_row gt_left\">Non-proportional hazards</td></tr>\n    <tr><td headers=\"Date\" class=\"gt_row gt_left\">31/03/2024</td>\n<td headers=\"Change\" class=\"gt_row gt_left\">Sensitivity analysis added where CKD is defined by eGFR persistently below 60 mL/min/1.73m² for at least 90 days</td>\n<td headers=\"Reason\" class=\"gt_row gt_left\">Reviewer 2 was critical of our initial definition of CKD. We maintain our original definition for primary analyses.</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n### Background and aims / objectives\n\nA brief description of why the study is important, and what the aims or objectives are.\n\nConsider who the reader is. If this is for a statistician to implement, 2 pages of biology, chemistry and/or anatomy are not helpful. The point is not to copy everything from the protocol (if one exists), but to provide the necessary context for the analyses.\n\n### Sample size\n\nIn observational (registry-based) studies, sample size/power calculations are irrelevant as they are beyond the control of the researcher. However, it is still relevant to consider how large a population can be expected. The statistician might not realize before looking at the data, that the population should be counted in tens rather that tens of thousands, in which case all the fancy methods that have been planned might not be possible. If the population is expected to be small (whatever that means), this should be clear to the ones planning the analyses, so they can tell[^9] you what is feasible and what is not.\n\n[^9]: The alternative is that they will yell at/about you for wasting their time.\n\n### Miscellaneous methods\n\nLikely, there are several relevant pieces of information which are rather matter-of-fact in nature and need no further explanation:\n\n-   A list of registries to be used.\n-   Study-, recruitment-, washout-, ... periods: if these are specified exactly once in the document, they only need to be changed once if they are revised while conducting the study.\n-   Time: how long is a month (e.g., 28, 30 or 30.5 days) and/or a year (e.g., 360, 365 or 365.25 days), if these are relevant units of time. Consider if a year should be the same as 12 months if both units are used in the project. Consider avoiding having both months and years as time units in the same project.\n-   Exposure groups: If there is an exposure/intervention/... and a control/comparison/reference... group, consider specifying these. E.g., the exposure group is SGLT2i-users and the control group is GLP-1RA-users.\n-   If the exposure is continuous, consider specifying the reference value. E.g., when comparing risk of dementia for different eGFR-values, a value of 75 mL/min/1.73m^2^ could be used as the reference.\n\n### Study population and index date\n\nSpecify step-by-step how the study population should be derived from the raw registry data. This will often require defining an index date from raw data (make sure it is clear what the index date is), and then a series of in- and exclusion criteria to be applied on this index date.[^10]\n\n[^10]: Sometimes there will be more than one day that is important. E.g., for a population with post-surgical infection, it might be necessary to apply some criteria on the date of the surgery and others on the date of the infection.\n\nPrepare a figure shell for a flowchart, and make sure the order of the criteria in the figure aligns with the order the criteria are listed in the text. Sometimes, it can be relevant to leave out some steps used to go from raw data to an index date from the flowchart.[^11] However, all exclusion criteria that are applied subsequent to defining the index date should be included in the flowchart.\n\n[^11]: Consider a project where you want to include all infections of a certain type, e.g., pneumonia. A person might be admitted to a hospital and transferred between departments, and so several records of the same pneumonia may be created in the registries. Another person might have pneumonia several times, and each distinct infection should be included. How you get from raw data, to a data set where each case of pneumonia is included once is essential in the data management plan but it might not be helpful to the target audience.\n\n### Variables\n\nDepending on the study design, different types of variables are necessary to define. A table of codes to be used for the individual variable should always be provided. This table can be a separate file or an appendix within the SAP. (See also @sec-codingTable below.)\n\nSome variables will likely have different roles, and it might be relevant to have separate paragraphs outlining (as relevant):\n\n-   how different levels of the exposure variable will be defined,\n-   how the outcome is defined,\n    -   if time-to-event-data; list competing and censoring events,\n-   other covariates to be reported.\n\nNote that rather than listing all variables in the text, it can be advantageous to point to a table shell (typically for Table 1 describing baseline characteristics), and state that these are the covariates to be included.\n\n### Statistical analyses\n\nThis is the key element of the statistical part of the SAP.\n\nSome aspects need little explanation. E.g., populating the table shell for Table 1 with baseline characteristics (in generic studies), does not generally require any particular explanation. It might be relevant to explicitly state that continuous variables (except calendar time) will be reported by their median and interquartile interval (Q1-Q3); that for dichotomous variables only one level (e.g., only the number of individuals *with* heart failure, not those without) will be reported, while for multilevel categorical variables, all levels will be reported.\n\nThe analyses need to be done should be specified. Things to consider:\n\n-   which type of (regression) model, if any, should be used,\n-   how should variables be included into the models (e.g., continuous variables can be included linearly, as splines, or using some other transformation),\n-   how should assumptions be assessed, and what should be done if they do not hold,\n-   which non-parametric methods (Kaplan-Meier, Aalen-Johansen, ...) should be used,\n-   how should missing data be handled (this can be a section on its own),\n-   how will uncertainty be estimated if it cannot simply be extracted from standard output (e.g., bootstrapping),\n-   sensitivity- and subgroup analyses should have their own sections, but questionable assumptions in the main analyses which will be challenged in sensitivity analyses could be mentioned here,\n-   which software packages to use (R, SAS, STATA, ...).\n\nTo reduce the risk of p-hacking, it can be a good idea to pre-specify interim results to evaluate before moving on. See @sec-sanity.\n\n#### Missing data\n\nIf missing data are expected it will generally be a good idea to write something about this in advance. Not just how to handle missing data, but also which variables are expected to contain missing data and to what extent. Knowing these numbers, will make it easier for the statistician to have an opinion on the feasibility of the study and methods.\n\n#### Stratified analyses\n\nSpecify if the analyses should be repeated within strata of some variables. Also specify if the results should be compared across strata, i.e., if effect-heterogeneity is assessed in some formal way, e.g., by estimating a parameter for an interaction term, with eyeballing being the implicit alternative.\n\n#### Sensitivity analyses including subgroup analyses\n\nIt might be necessary to run bias analyses to handle, e.g., unmeasured confounding or selection bias. These should be mentioned here. Furthermore, having gotten this far, surely, some arbitrary choices will have been made, and the impact of some of these might be relevant to consider in sensitivity analyses. Examples could be\n\n-   use of secondary diagnoses for outcome identification,\n-   length of follow-up,\n-   washout- or grace periods,\n-   recruitment period,\n-   lookback period for variables,\n-   in- or exclusion of specific patient groups.\n\nIf residual confounding is a concern, restriction to specific subgroups can be used.[^12] E.g., if obesity, alcohol consumption, smoking or other variables that are hard to measure are important confounders, an analysis restricted to individuals who are known or presumed to be similar with respect to these variables (have a record compatible with obesity, alcoholism, COPD, etc.) may be important to run.[^13]\n\n[^12]: Note the difference between a subgroup analysis and a stratified analysis. The implicit aim of a stratified analysis is to assess effect modification, and all individuals are included, being in exactly one of the strata (assuming no missing data). Subgroup analyses on the other hand, might include only those with a certain characteristic, e.g., presence of a confounding factor which can be found with high positive predictive value but low sensitivity. Such a factor will likely result in residual confounding in the main analysis, but not within the subgroup having the factor. Note that residual confounding would be expected among those without the factor making to other subgroup less relevant to analyse.\n\n[^13]: Depending on the strength of the confounder it could be considered if the primary analysis should be within the restricted population, coming at the cost of generalizability and a reduced population size which may affect precision. This consideration should be made before running the analyses.\n\nSplitting and reanalyzing the population on calendar time can be relevant. Perhaps the demographics of the population, or the indication of a treatment changes over time, introducing a shift in the confounding pattern. However, calendar time in itself is generally hard to interpret as an effect modifier. At best it is a proxy for some other variable. Therefore calendar time stratification arguably belongs under subgroup (sensitivity) analyses rather than stratified analyses.\n\n### Table shells\n\nMake a set of tables that are empty but otherwise ready to be published. There should a table shell for each table to be included in the manuscript or supplementary materials of the publication.\n\n### Figure shells\n\nAs for table shells, there should be a specification of each figure to be included in the publication. Remember to make a figure shell for the flow chart!\n\nIt is generally harder to make shells for figures than for tables, so consider copying/linking to figures from other publications that can be used as templates. Specify axis-labels, colors etc. if they need to be specific.[^14]\n\n[^14]: It will often be quick to change these parameters, but if you know in advance what they should be you might as well spell it out explicitly.\n\n### Coding table {#sec-codingTable}\n\nProvide all (diagnosis/procedure/ATC/SNOMED/NPU/...) codes needed to define the study population, exposure, outcome, and covariates, in a structured manner. The coding table can be a separate file (e.g., a spreadsheet) or part of the SAP. Make it easy to copy/import codes from the coding table to analytic scripts so they do not have to be transcribed manually.\n\nColumns to include in the coding table could be:\n\n-   explicit variable names[^15] (typically, these are irrelevant unless you want to annoy your statistical programmer, however, when using a common data model across sites they are essential for the input data),\n-   informal variable names,[^16]\n-   data source from which the codes are pulled, e.g., the Danish National Patient Registry (DNPR),\n-   the actual codes to be used, e.g., DN18,\n-   patient- and diagnosis type (applicable to Danish National Patient Registry); in-, out-, ER-patients, primary or secondary diagnoses,\n-   lookback from index date,\n-   notes on issues that are relevant for a specific variable that does not warrant a column in it self. E.g., thresholds for biomarkers defining conditions like CKD (eGFR) or type 2 diabetes mellitus (HbA1c); or that a diagnosis code for mycosis fungoides must be made a department of dermatology to be included.\n\n[^15]: I.e., the name the variable should have in the analytic script, e.g., `gld_180d`. If explicit variable names are used, they have to conform to the statistical software package used.\n\n[^16]: I.e., the name as you would refer to it in text, e.g., 'glucose lowering drugs within 180 days'.\n\nFurther structure can be added as in @tbl-codingtable where variables are sorted by their role (exposure, in-/exclusion, outcomes, etc.). Note that seemingly similar variables can be defined differently depending on their purpose at different stages in the study. In @tbl-codingtable, specific algorithms are used to define plague and cholera as outcomes, whereas sensitive algorithms are used for exclusion criteria.\n\n\n\n\n::: {#tbl-codingtable .cell tbl-cap='Suggested structure for a coding table. Code column intentionally left blank. Make codes easy to transfer to statistical software.'}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"hkgwzluvfe\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#hkgwzluvfe table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#hkgwzluvfe thead, #hkgwzluvfe tbody, #hkgwzluvfe tfoot, #hkgwzluvfe tr, #hkgwzluvfe td, #hkgwzluvfe th {\n  border-style: none;\n}\n\n#hkgwzluvfe p {\n  margin: 0;\n  padding: 0;\n}\n\n#hkgwzluvfe .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hkgwzluvfe .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#hkgwzluvfe .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hkgwzluvfe .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hkgwzluvfe .gt_heading {\n  background-color: #FFFFFF;\n  text-align: left;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hkgwzluvfe .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hkgwzluvfe .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hkgwzluvfe .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hkgwzluvfe .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hkgwzluvfe .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hkgwzluvfe .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hkgwzluvfe .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hkgwzluvfe .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#hkgwzluvfe .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#hkgwzluvfe .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hkgwzluvfe .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hkgwzluvfe .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hkgwzluvfe .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hkgwzluvfe .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hkgwzluvfe .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#hkgwzluvfe .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#hkgwzluvfe .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#hkgwzluvfe .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hkgwzluvfe .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#hkgwzluvfe .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#hkgwzluvfe .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hkgwzluvfe .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hkgwzluvfe .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hkgwzluvfe .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hkgwzluvfe .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hkgwzluvfe .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hkgwzluvfe .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hkgwzluvfe .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hkgwzluvfe .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hkgwzluvfe .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hkgwzluvfe .gt_left {\n  text-align: left;\n}\n\n#hkgwzluvfe .gt_center {\n  text-align: center;\n}\n\n#hkgwzluvfe .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hkgwzluvfe .gt_font_normal {\n  font-weight: normal;\n}\n\n#hkgwzluvfe .gt_font_bold {\n  font-weight: bold;\n}\n\n#hkgwzluvfe .gt_font_italic {\n  font-style: italic;\n}\n\n#hkgwzluvfe .gt_super {\n  font-size: 65%;\n}\n\n#hkgwzluvfe .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#hkgwzluvfe .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#hkgwzluvfe .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#hkgwzluvfe .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#hkgwzluvfe .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#hkgwzluvfe .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#hkgwzluvfe .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#hkgwzluvfe .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#hkgwzluvfe div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" style=\"table-layout:fixed;width:100%;\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <colgroup>\n    <col style=\"width:14%;\"/>\n    <col style=\"width:14%;\"/>\n    <col style=\"width:16%;\"/>\n    <col style=\"width:14%;\"/>\n    <col style=\"width:14%;\"/>\n    <col style=\"width:14%;\"/>\n    <col style=\"width:14%;\"/>\n  </colgroup>\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"7\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style=\"font-weight: bold;\">Coding table</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"Variable\">Variable</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"Data-source\">Data source</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"Codes\">Codes</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"Patient-type\">Patient type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"Diagnosis-types\">Diagnosis types</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"Lookback\">Lookback</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"Notes\">Notes</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\" style=\"font-style: italic; background-color: #CCCCCC;\">Exposure</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\">Prescription registry</td>\n<td headers=\"Codes\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\">NA</td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\">NA</td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\">NA</td>\n<td headers=\"Notes\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\">SGLT2i</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\"></td>\n<td headers=\"Codes\" class=\"gt_row gt_left\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\"></td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\"></td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\"></td>\n<td headers=\"Notes\" class=\"gt_row gt_left\"></td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\">GLP-1RA</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\"></td>\n<td headers=\"Codes\" class=\"gt_row gt_left\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\"></td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\"></td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\"></td>\n<td headers=\"Notes\" class=\"gt_row gt_left\">Exclude brand names Saxenda and Wegovy</td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\" style=\"font-style: italic; background-color: #CCCCCC;\">In-/exclusion</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Codes\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Notes\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\">T2DM/Glucose lowering drugs</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\">Prescription registry</td>\n<td headers=\"Codes\" class=\"gt_row gt_left\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\">1 year</td>\n<td headers=\"Notes\" class=\"gt_row gt_left\"></td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\">T2DM/HbA1c</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\">Laboratory registry</td>\n<td headers=\"Codes\" class=\"gt_row gt_left\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\">3 years</td>\n<td headers=\"Notes\" class=\"gt_row gt_left\">Any HbA1c &gt; … indicates T2DM</td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\">T2DM/diagnoses</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\">Patient registry</td>\n<td headers=\"Codes\" class=\"gt_row gt_left\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\">All</td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\">Primary, secondary</td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\">10 years</td>\n<td headers=\"Notes\" class=\"gt_row gt_left\"></td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\">Recent plague or Cholera</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\">Patient registry</td>\n<td headers=\"Codes\" class=\"gt_row gt_left\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\">All</td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\">Primary, secondary</td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\">90 days</td>\n<td headers=\"Notes\" class=\"gt_row gt_left\"></td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\">…</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\"></td>\n<td headers=\"Codes\" class=\"gt_row gt_left\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\"></td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\"></td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\"></td>\n<td headers=\"Notes\" class=\"gt_row gt_left\"></td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\" style=\"font-style: italic; background-color: #CCCCCC;\">Outcomes</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\">Patient registry</td>\n<td headers=\"Codes\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\">Inpatient</td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\">Primary</td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Notes\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\">Only at a department of infectious diseases</td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\">Plague</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\"></td>\n<td headers=\"Codes\" class=\"gt_row gt_left\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\"></td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\"></td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\"></td>\n<td headers=\"Notes\" class=\"gt_row gt_left\"></td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\">Cholera</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\"></td>\n<td headers=\"Codes\" class=\"gt_row gt_left\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\"></td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\"></td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\"></td>\n<td headers=\"Notes\" class=\"gt_row gt_left\"></td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\" style=\"font-style: italic; background-color: #CCCCCC;\">Comorbidities</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Codes\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Notes\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\">…</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\"></td>\n<td headers=\"Codes\" class=\"gt_row gt_left\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\"></td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\"></td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\"></td>\n<td headers=\"Notes\" class=\"gt_row gt_left\"></td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\" style=\"font-style: italic; background-color: #CCCCCC;\">Comedication</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Codes\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Notes\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\">…</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\"></td>\n<td headers=\"Codes\" class=\"gt_row gt_left\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\"></td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\"></td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\"></td>\n<td headers=\"Notes\" class=\"gt_row gt_left\"></td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\" style=\"font-style: italic; background-color: #CCCCCC;\">Biomarkers</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Codes\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td>\n<td headers=\"Notes\" class=\"gt_row gt_left\" style=\"background-color: #CCCCCC;\"></td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\">…</td>\n<td headers=\"Data source\" class=\"gt_row gt_left\"></td>\n<td headers=\"Codes\" class=\"gt_row gt_left\"></td>\n<td headers=\"Patient type\" class=\"gt_row gt_left\"></td>\n<td headers=\"Diagnosis types\" class=\"gt_row gt_left\"></td>\n<td headers=\"Lookback\" class=\"gt_row gt_left\"></td>\n<td headers=\"Notes\" class=\"gt_row gt_left\"></td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n### References\n\nList of literature referenced in the SAP\n\n## Pitfalls to avoid\n\n1.  Avoid repetitions.\n    -   Whenever possible specify things exactly once, then there is exactly one place to change this when revising. This means that the statistician/statistical programmer does not accidentally read the recruitment period the one place you overlooked when revising.\n2.  Do not write codes from the coding table in the text, it serves no purpose when it is also specified in a coding table (see previous point about repetitions).\n3.  Avoid circular reasoning/definitions. It can be necessary to refer to a later section of the SAP, but make sure that this later section does not point back, so that in effect, the index date is defined as the date of the index date, or similar.\n\n## Simple tip for specifying the order of inclusion-/exclusion criteria\n\nDraw timelines of hypothetical patients' records in registries. How might records of various conditions, relative to each other and the recruitment period, affect who gets in- and excluded? Who would you want to include and who not? How can you set up the order of in- and exclusion criteria to obtain the desired study population? Of particular importance is the point in your inclusion-/exclusion criteria ordering, where you define the index date. Once the index date is set, it is generally of minor importance how subsequent criteria are ordered from the point of view of the data manager.\n\nConsider this description of a study population from a hypothetical protocol:\n\n> We will include individuals diagnosed with herpes zoster between 2000 and 2020 using the Danish National Patient Registry. All patients are required to have been diagnosed at a department of dematology to be included. Patient will be included at the time of their first diagnosis.\n\nBeyond having a diagnosis of herpes zoster, the protocol outlines three key elements to consider, when settling on the order of the inclusion-/exclusion criteria:\n\n-   calendar time of diagnosis,\n-   department of dermatology, and\n-   first observation per patient.\n\nThese criteria can be ordered in 6 different ways, and the above ordering is based on the ordering they are mentioned in the text, but that might not be optimal.\n\nTo get a feeling of who you want to include, and how you achieve that, you might consider different hypothetical patients diagnoses of herpes zoster as in @fig-timelines.\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Hypothetical herpes zoster diagnosis patterns](basics_files/figure-html/fig-timelines-1.png){#fig-timelines width=672}\n:::\n:::\n\n\n\n\nIf we had started by extracting all diagnosis codes from the Danish National Patient Registry and then applied the three criteria in the order given above, we would\n\n1.  ignore the first diagnosis of patients 1, 4 and 6 (they are before the study period - patient 6 is excluded),\n2.  ignore the diagnoses given at non-dermatology departments (this removes patient 5), and\n3.  include all remaining patients at their first (remaining) diagnosis at a department of dermatology.\n\nSo, for this ordering of inclusion-/exclusion criteria, all patients, who had a diagnosis at a department of dermatology at some point during the study period, would be included regardless of their other diagnoses. That might be reasonable for a descriptive study, e.g.,\n\n-   What characterizes patients with herpes zoster at departments of dermatology in Denmark?\n\nbut perhaps less so in a cohort study e.g.,\n\n-   What is the prognosis after incident herpes zoster?\n\nwhere you only want to include incident cases, so at least patient 4 should also be excluded. Depending on the positive predictive value of diagnoses codes for herpes zoster at non-dermatology departments, patients 1 and 3 can be in- or excluded.\n\nIf specificity is prioritized, i.e., you want to increase certainty of the condition being incident, then you probably want to exclude patients with a prevalent diagnosis at a non-dermatology department at the cost of population size, including only patient 2 from @fig-timelines. To do this, you can use the ordering:\n\n1.  restrict to the first observation per patient (this excludes no patient), the time of the diagnosis marks the index date,\n2.  exclude patients with index dates outside of the study period (this excludes patients 1, 4 and 6),\n3.  exclude patients not seen at a dermatology department on the index date (this excludes patients 3 and 5).\n\nBecause they come after selection of the index date, the ordering of the latter two steps is irrelevant when it comes to the final study population. However, there might still be a natural ordering of these steps from a clinical point of view. Keep this in mind when specifying the inclusion-/exclusion sequence.\n\nIf a more sensitive approach is used, e.g., because you don't trust diagnosis codes from non-dermatology departments, you might argue that including patients 1-3 is reasonable within the scope of the project. This can be done by reordering the criteria as such:\n\n1.  include observations from dermatology departments only (patient 5 is excluded),\n2.  restrict to the first diagnosis per patient, this marks the index date,\n3.  restrict to index dates within the study period (patients 4 and 6 are excluded).\n\n## External links\n\n[Graphical Depiction of Longitudinal Study Designs in Health Care Databases](https://doi.org/10.7326/M18-3079)\n\n[Visualizations throughout pharmacoepidemiology study planning, implementation, and reporting](https://doi.org/10.1002/pds.5529)\n",
    "supporting": [
      "basics_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}